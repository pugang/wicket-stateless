apply plugin: 'java'
apply plugin: 'eclipse'
apply plugin: 'war'

targetCompatibility = '1.6'
sourceCompatibility = '1.6'

repositories {
	mavenLocal()
	mavenCentral()
	maven {
		url "https://repository.apache.org/content/repositories/snapshots/"
	}
}

// never include this modules in build
configurations {
	all*.exclude module: 'commons-logging'
	all*.exclude group: 'cglib', module: 'cglib-nodep'
	all*.exclude group: 'log4j', module: 'log4j'
}

libz = [
	wicket: '6.0-SNAPSHOT',
	jetty: '7.4.2.v20110526',
	junit: '4.8.2',
	logback: '1.0.0'
]

dependencies {
	// wicket
	compile	'org.apache.wicket:wicket:'+libz.wicket,
			'org.apache.wicket:wicket-devutils:'+libz.wicket

	// jetty
	compile "org.eclipse.jetty.aggregate:jetty-all-server:"+libz.jetty

	// logging
	compile	'ch.qos.logback:logback-classic:'+libz.logback

	// test
	testCompile 'junit:junit:'+libz.junit
}

task createMavenProjectStructure << {
    logger.info("Creating Maven Project Structure\n")

    webAppDir.mkdirs()
    sourceSets.all*.java.srcDirs*.each { it.mkdirs() }
    sourceSets.all*.resources.srcDirs*.each { it.mkdirs() }
}